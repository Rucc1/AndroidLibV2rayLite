sudo: required
language: go
go:
  - "1.11"
go_import_path: github.com/2dust/AndroidLibV2rayLite
git:
  depth: 5
addons:
  apt:
    update: true
before_script:
- sudo ntpdate -u time.google.com
- date
- make all
- make downloadGoMobile
script:
- go test -p 1 -tags json -v github.com/2dust/AndroidLibV2rayLite/...
- make BuildMobile
after_success:
deploy:
  provider: releases
  api_key:
    secure: LyqyiQ2nAkSWkumI0QkzimZn7vv5l1Lde3rGD2Bq9a//LDf1p8veJVjCAs/YR8+b97JJr8HUf713R1qT46X8CVvcHAET1fEHsj1s/X6ej7qbcwSTGgfUImLhRmL43vkSus+7ix1AQvDwcwJ4YZNg30G3bEU/AB64VJ/MJOLpaQzr5/kRYIxpiIua/c8RZRNpMBk61t05hoP6CQHWl5wl+lZOyznTPOE1yJvykaR4JzybzfKUzWjY7fQIdmlwdXUOClIP6iPk/NgrmYdNchKwO1awnp+CcCrGFbXkYwMVL6WkJHt7FucBgHW18riKsqtoH3J36N1gC1kxNuwDvg0ws0Pst/njqMDBuHycStDyOklRHCUPr1NPTVeKWPRCagBg7L4SgxOd0+UqZpH4xJ1mCtPRWDVLL4ZVa3eNhvJxrBbNiOXClspSps3W+qNV4ixNGdKmSXsGFnN2hfjABJVC3XLRLHq/QuB2QM0EbsWp+au/waMwgvDb1lhSdhTEzChkc2Ygi/XCM+lOsw/ivyp0kMMcAc4z0sK+xsohuoRMRg+CDIpUpkLhhFmmILcyLD8SpRg7QqTf5eB6LjzE6aQ92q6hK07Vd7dDw9epKhCdVFRfSOFEiwAuGekWkEg1Wzig4WppoYYcW5PhnymDkZBfKiTMHEG7h7tOLsYf/wglEJk=
  file:
    - libv2ray.aar
  skip_cleanup: true
  on:
    tags: true
