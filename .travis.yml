sudo: required
language: go
go:
  - "1.11"
go_import_path: github.com/2dust/AndroidLibV2rayLite
git:
  depth: 5
addons:
  apt:
    update: true
before_script:
- sudo ntpdate -u time.google.com
- date
- make all
- make downloadGoMobile
script:
- go test -p 1 -tags json -v github.com/2dust/AndroidLibV2rayLite/...
- make BuildMobile
after_success:
deploy:
  provider: releases
  api_key:
    secure: WkBKJBkUYT3dUiZ/A4N49XbskR5I+LF7abqfUk0R43QLYKjw1pU42fRZCbRy4+19oozLgbisbzDJAgk47uYiAx/4v6+MpM4UmRXf1ei367u95ni9EluS0Hp8GJ59fcNbxTqkI3Ip2s3f9R9U9zzd22yXKtdCW1dvGNU8wJRm/A1vlOG40vq/nZR6wwJ3nCS8u3xauHaka1w33WBPa/E9Fv1bg17YnXdI4Q8PwGdTJOLq0hWWaRX4v1kQFczJ1MlRWkVmCtFsAv/RyZolRWXkVFvE9OHUeWoQoAkXbYs6FAgzODK1BuB6A2NqrG+BgZs60Sw4v9Zi5L+N2pdMo3RfmpCRi13p5R3j2YMFhucu+pScbpuM0ByvjzPpSxzHy4ioaLfetYmyXeLe2b3wYyOrNsDjX1hsYIFrIZ2SdrKabWB7xA0SPSuXPWqaTnTDZSLIXmeqVP9GUYWdAEUiS+bF9hXnR0M3NtNvgdYLkH+Aq8R4Hd9Xj7sdrZk7iMwAsJL2NSic6lHLtshQCJRIshQjIUvHRrXrQOEaF/IVGXLaQnPIuwlcEF3x5f/i3S1qPfJpdsw1xhh61PPqpAkaJauueT/wGTDVDLxNsQWmqYrK8oLWkKUL/LHx4Pq2uD28tuQVteho6neU9VcCYRdw6kXrJEpveW91eq8E94yYlrQJulw=
  file:
    - libv2ray.aar
  skip_cleanup: true
  on:
    tags: true
